{"version":3,"sources":["../src/DesktopHeader.jsx"],"names":["React","PropTypes","injectIntl","intlShape","getConfig","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","messages","CaretIcon","DesktopHeader","props","mainMenu","Array","isArray","map","menuItem","type","href","content","submenuContent","appMenu","appMenuContent","menuItems","userMenu","avatar","username","intl","formatMessage","loggedOutItems","item","i","arr","length","logo","logoAltText","logoDestination","loggedIn","logoProps","src","alt","logoClasses","AUTHN_MINIMAL_HEADER","renderMainMenu","renderAppMenu","renderUserMenu","renderLoggedOutItems","Component","propTypes","oneOfType","node","array","arrayOf","shape","oneOf","string","bool","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getConfig } from '@edx/frontend-platform';\n\n// Local Components\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\n// i18n\nimport messages from './Header.messages';\n\n// Assets\nimport { CaretIcon } from './Icons';\n\nclass DesktopHeader extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderMainMenu() {\n    const { mainMenu } = this.props;\n\n    // Nodes are accepted as a prop\n    if (!Array.isArray(mainMenu)) {\n      return mainMenu;\n    }\n\n    return mainMenu.map((menuItem) => {\n      const {\n        type,\n        href,\n        content,\n        submenuContent,\n      } = menuItem;\n\n      if (type === 'item') {\n        return (\n          <a key={`${type}-${content}`} className=\"nav-link\" href={href}>{content}</a>\n        );\n      }\n\n      return (\n        <Menu key={`${type}-${content}`} tag=\"div\" className=\"nav-item\" respondToPointerEvents>\n          <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\" href={href}>\n            {content} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n          </MenuTrigger>\n          <MenuContent className=\"pin-left pin-right shadow py-2\">\n            {submenuContent}\n          </MenuContent>\n        </Menu>\n      );\n    });\n  }\n\n  // Renders an optional App Menu for\n  renderAppMenu() {\n    const { appMenu } = this.props;\n    const { content: appMenuContent, menuItems } = appMenu;\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\">\n          {appMenuContent} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {menuItems.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      appMenu,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.main.nav'])}\n              className=\"nav main-nav\"\n            >\n              {this.renderMainMenu()}\n            </nav>\n            {appMenu ? (\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.app.nav'])}\n                className=\"nav app-nav\"\n              >\n                {this.renderAppMenu()}\n              </nav>\n            ) : null}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n              className=\"nav secondary-menu-container align-items-center ml-auto\"\n            >\n              {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n            </nav>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nDesktopHeader.propTypes = {\n  mainMenu: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n\n  // i18n\n  intl: intlShape.isRequired,\n\n  // appMenu\n  appMenu: PropTypes.shape(\n    {\n      content: PropTypes.string,\n      menuItems: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string,\n          href: PropTypes.string,\n          content: PropTypes.string,\n        }),\n      ),\n    },\n  ),\n};\n\nDesktopHeader.defaultProps = {\n  mainMenu: [],\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  appMenu: null,\n};\n\nexport default injectIntl(DesktopHeader);\n"],"file":"DesktopHeader.js"}