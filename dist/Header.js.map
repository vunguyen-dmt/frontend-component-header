{"version":3,"sources":["../src/Header.jsx"],"names":["React","useContext","Responsive","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","mergeConfig","getConfig","subscribe","DesktopHeader","MobileHeader","messages","AUTHN_MINIMAL_HEADER","process","env","Header","intl","authenticatedUser","config","mainMenu","type","href","LMS_BASE_URL","content","formatMessage","orderHistoryItem","ORDER_HISTORY_URL","userMenu","username","LOGOUT_URL","splice","loggedOutItems","LOGIN_URL","props","logo","LOGO_URL","logoAltText","SITE_NAME","logoDestination","loggedIn","avatar","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport Responsive from 'react-responsive';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  mergeConfig,\n  getConfig,\n  subscribe,\n} from '@edx/frontend-platform';\n\nimport DesktopHeader from './DesktopHeader';\nimport MobileHeader from './MobileHeader';\n\nimport messages from './Header.messages';\n\nensureConfig([\n  'LMS_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n], 'Header component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'Header additional config');\n});\n\nfunction Header({ intl }) {\n  const { authenticatedUser, config } = useContext(AppContext);\n\n  const mainMenu = [\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/dashboard`,\n      content: intl.formatMessage(messages['header.links.courses']),\n    },\n  ];\n\n  const orderHistoryItem = {\n    type: 'item',\n    href: config.ORDER_HISTORY_URL,\n    content: intl.formatMessage(messages['header.user.menu.order.history']),\n  };\n\n  const userMenu = authenticatedUser === null ? [] : [\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/dashboard`,\n      content: intl.formatMessage(messages['header.user.menu.dashboard']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/u/${authenticatedUser.username}`,\n      content: intl.formatMessage(messages['header.user.menu.profile']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/account/settings`,\n      content: intl.formatMessage(messages['header.user.menu.account.settings']),\n    },\n    {\n      type: 'item',\n      href: config.LOGOUT_URL,\n      content: intl.formatMessage(messages['header.user.menu.logout']),\n    },\n  ];\n\n  // Users should only see Order History if have a ORDER_HISTORY_URL define in the environment.\n  if (config.ORDER_HISTORY_URL) {\n    userMenu.splice(-1, 0, orderHistoryItem);\n  }\n\n  const loggedOutItems = [\n    {\n      type: 'item',\n      href: config.LOGIN_URL,\n      content: intl.formatMessage(messages['header.user.menu.login']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/register`,\n      content: intl.formatMessage(messages['header.user.menu.register']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: `${config.LMS_BASE_URL}/dashboard`,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    mainMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : mainMenu,\n    userMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : userMenu,\n    loggedOutItems: getConfig().AUTHN_MINIMAL_HEADER ? [] : loggedOutItems,\n  };\n\n  return (\n    <>\n      <Responsive maxWidth={768}>\n        <MobileHeader {...props} />\n      </Responsive>\n      <Responsive minWidth={769}>\n        <DesktopHeader {...props} />\n      </Responsive>\n    </>\n  );\n}\n\nHeader.propTypes = {\n  intl: intlShape.isRequired,\n};\n\nexport default injectIntl(Header);\n"],"file":"Header.js"}